.matrix {
  overflow-x: auto;
  margin: 20px;
  padding: 1rem;
  border-radius: 12px;
  background: #0000003d;
  font-family: system-ui, sans-serif;
  box-shadow:
    0 0 0 1px rgba(120,140,255,0.15),
    0 10px 30px rgba(0,0,0,0.4);
}

.row {
  display: grid;
  grid-template-columns: 120px repeat(auto-fit, minmax(36px, 1fr));
  align-items: center;
  margin-bottom: 6px;
}

.header {
  position: sticky;
  top: 0;
  z-index: 5;
  background: #0b1020;
  color: #aaa;
  font-size: 0.75rem;
}

.label {
  color: #aaa;
  font-size: 0.8rem;
}

.cell {
  display: flex;
  justify-content: center;
  align-items: center;
}

.dot {
  width: 14px;
  height: 14px;
  border-radius: 50%;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.15);
}

.bar {
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.15);
}

.cloud {
  &.c1 { background: #2e7d32; }
  &.c2 { background: #558b2f; }
  &.c3 { background: #7cb342; }
  &.c4 { background: #c0ca33; }
  &.c5 { background: #fdd835; }
  &.c6 { background: #f9a825; }
  &.c7 { background: #ef6c00; }
  &.c8 { background: #e53935; }
  &.c9 { background: #c62828; }
}

.seeing {
  &.s1 { background: #c62828; }
  &.s2 { background: #e53935; }
  &.s3 { background: #ef6c00; }
  &.s4 { background: #f9a825; }
  &.s5 { background: #fdd835; }
  &.s6 { background: #c0ca33; }
  &.s7 { background: #7cb342; }
  &.s8 { background: #558b2f; }
  &.s9 { background: #2e7d32; }
}

.bar.trans {
  width: 40px;
  height: 6px;
  border-radius: 3px;

  &.t2 { background: #c62828; }
  &.t6 { background: #fdd835; }
  &.t9 { background: #2e7d32; }
}

.temp {
  font-size: 0.75rem;
  color: #8fd;
}

.cell {
  &.astro-hack { background: rgba(140,40,53,0.705); }
  &.astro-night { background: rgba(140,40,53,0); }
  &.astro-night-partial { background: rgba(140,40,53,0.442); }

  &.moon-bar { background: rgba(242,243,248,0.075); }
  &.moon-bar-partial { background: rgba(242,243,248,0.026); }
}

.moon-cell {
  position: relative;
}

.planet-cell {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 2px;
  overflow: hidden;
}

.planet-icon {
  width: 25px;
  height: 25px;
  object-fit: contain;
}

.matrix-controls {
  display: inline-flex;
  gap: 4px;
  padding: 4px;
  border-radius: 5px;
  background: #0b1020;
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,0.05),
    0 0 20px rgba(100,150,255,0.15);

  button {
    all: unset;
    cursor: pointer;
    padding: 6px 16px;
    font-size: 0.8rem;
    text-transform: uppercase;
    color: #9fb0ff;
    border-radius: 5px;
    transition: all 0.25s ease;

    &:hover {
      background: rgba(120,150,255,0.12);
    }

    &.active {
      background: linear-gradient(135deg, #6f8cff, #8fb6ff);
      color: #0b1020;
      font-weight: 600;
      box-shadow: 0 0 12px rgba(140,170,255,0.6);
    }
  }
}

.matrix-tooltip {
  position: absolute;
  z-index: 1000;
  padding: 0.8rem 1rem;
  border-radius: 10px;
  background: #0b1020;
  color: #e6ebff;
  font-size: 0.75rem;
  pointer-events: none;
  box-shadow: 0 10px 30px rgba(0,0,0,0.6);
}

.loading-overlay {
  position: fixed;
  inset: 0;
  z-index: 2000;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background: rgba(0,0,0,0.5);

  p {
    margin-top: 1rem;
    color: white;
    font-size: 1.2rem;
  }
}

.spinner {
  width: 60px;
  height: 60px;
  border: 6px solid rgba(255,255,255,0.3);
  border-top-color: #fff;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

@media (max-width: 768px) {
  .matrix {
    margin: 10px;
    padding: 0.75rem;
  }

  .row {
    grid-template-columns: 80px repeat(auto-fit, minmax(32px, 1fr));
  }

  .planet-icon {
    width: 18px;
    height: 18px;
  }

  .matrix-tooltip {
    position: static;
    margin-top: 1rem;
    pointer-events: auto;
  }
}

@media (max-width: 380px) {
  .matrix {
    margin: 5px;
    padding: 0.5rem;
    font-size: 0.65rem;
  }

  .row {
    grid-template-columns: 60px repeat(auto-fit, minmax(28px, 1fr));
  }

  .planet-icon {
    width: 14px;
    height: 14px;
  }
}
